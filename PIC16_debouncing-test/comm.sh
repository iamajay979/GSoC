#!/bin/bash

DEVICE=$1

#read NUMBERS
declare NUMBERS
NUMBERS="80000000 00003F00 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 FFFFFFFF"

if [[ -z "$1" ]]; then
	DEVICE="/dev/ttyUSB0"
fi

echo "DEVICE: $DEVICE"

cat $DEVICE &

echo "?0=1=-" >> $DEVICE

sleep 1

echo "0&" >> $DEVICE

for i in ${NUMBERS}; do
	inv=$(echo $i | tr '0123456789ABCDEF' 'FEDCBA9876543210')
	echo "${inv}|" >> $DEVICE
done
	echo "0&1D*" >> $DEVICE
	#${#NUMBERS[@]}

sleep 1
